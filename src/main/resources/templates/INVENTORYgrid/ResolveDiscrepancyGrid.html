<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolve Discrepancy</title>
    
    <link rel="stylesheet" href="/css/hrms.css"> <!-- // for side bar code  -->
    <link rel="stylesheet" href="/css/grid.css">
    <link rel="stylesheet" href="/css/emplist.css">

    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">
</head>
<style>
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #f0f0f0;
      padding: 10px 20px;
    }

    .search-box {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-box button,
    .back-button {
      padding: 6px 12px;
      font-size: 14px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .search-box button:hover,
    .back-button:hover {
      background-color: #0056b3;
    }
  </style>
<body>
<div th:replace="~{INVENTORY.html :: sidebarFragment}"></div> <!-- // for side bar code  -->

<div class="button-container">
    
</div>

<div class="button-grid">
    <button onclick="loadCycleCountPhysicalTable()"style="width:112%; margin-left: 20px;">Cycle Count Physical Details</button>
    <button onclick="loadPhysicalCountTable()"style="width:112%; margin-left: 50px;">Physical Count Details</button>
<!--     <button onclick="loadSalesOrderTable()">Sales Order Details</button> -->
<!--     <button onclick="loadBackOrderTable()">Back Order Details</button> -->
    
</div>

<div id="resolvediscrepancy-table-container">
    <!-- Add the button above the table -->
<!--    <button class="styled-button" onclick="window.location.href='/empregister';">-->
<!--        Open Employee Registration Form-->
<!--    </button>-->
</div> <!-- Table will be dynamically loaded here -->

<script src="grid.js"></script>
<script>
function goBack() {
	window.location.href = '/dashboard';
  }
  
</script>
<script>
    function loadCycleCountPhysicalTable() {
        // Create the button and table container structure immediately
        const container = document.getElementById("resolvediscrepancy-table-container");
        container.innerHTML =`
            <div class="table-header">
				<div class="button-container" style="margin-left: 1045px;">
				                <button class="styled-button" onclick="window.location.href='/inventory/resolvediscrepancygrid'>
				                    <i class="fas fa-arrow-left"></i> Back
				                </button>
				                <button id="open-register-btn" class="styled-button" style="flex-grow: 1; margin-left: 20px;">
				                Cycle Count Physical Form
				                </button>
				            </div>
				</div>
            <table>
                <thead>
                    <tr>
                    <th>ID</th>
                    <th>Product ID</th>
                    <th>Product Name</th>
                    <th>Warehouse ID</th>
                    <th>Warehouse Name</th>
                    <th>Current System Stock</th>
                    <th>Physical Count</th>
                    <th>Difference</th>
                    <th>Physical Count Date</th>
                    <th>Approval Status</th>
                    <th>Action</th>
                    </tr>
                </thead>
                <tbody id="cyclecountphysicalform-table-body">
                    <tr><td colspan="9">Loading data...</td></tr>
                </tbody>
            </table>
        `;

        // Add event listener to the "Register Employee" button
        document.getElementById("open-register-btn").addEventListener("click", () => {
            // Redirect to the employeeattendance registration form
            window.location.href = '/physicalcyclecountform';
        });

        // Fetch and populate table data
        fetch('/viewCyclePhysicalCountlist')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                const headers = data.headers; // Extract headers dynamically
                const rows = data.data;      // Extract employee data
                const tbody = document.getElementById("cyclecountphysicalform-table-body");

                // Check if there are rows to display
                if (rows.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="9">No data available.</td></tr>`;
                    return;
                }

                // Generate rows from data
                tbody.innerHTML = rows.map(row => `
                    <tr>
		                <td>${row['ID']}</td>
		                <td>${row['Product ID']}</td>
		                <td>${row['Product Name']}</td>
		                <td>${row['Warehouse ID']}</td>
		                <td>${row['Warehouse Name']}</td>
		                <td>${row['Current System Stock']}</td>
		                <td>${row['Physical Count']}</td>
		                <td>${row['Difference']}</td>
		                <td>${row['Physical Count Date']}</td>
		                <td>${row['Approval Status']}</td>
                        <td>
                            <div class="action-buttons">
                                <a href="#" class="btn btn-delete" data-id="${row['ID']}" onclick="confirmDeleteCycleCountPhysicalInfo(this)">Delete</a>
                                <a href="/getphysicalcyclecount/${row['ID']}" class="btn btn-update">Update</a>
                            </div>
                        </td>
                    </tr>
                `).join('');
            })
            .catch(error => {
                console.error('Error fetching cycle count physical form data:', error);
                document.getElementById("cyclecountphysicalform-table-body").innerHTML = `<tr><td colspan="9">Error loading data.</td></tr>`;
            });
    }

    // Example function to handle delete action
    	function confirmDeleteCycleCountPhysicalInfo(element) {
	    const id = element.getAttribute('data-id'); // Retrieve the employee ID
	    if (confirm(`Are you sure you want to delete cycle count physical form data with ID: ${id}?`)) {
	        // Perform the fetch request with the employee ID as a query parameter
	        fetch(`/deletephysicalcyclecountinfo?id=${id}`, { method: 'GET' })
	            .then(response => {
	                if (response.redirected) {
	                    // Redirect to the new location if the server redirects
	                    window.location.href = response.url;
	                } else {
	                    console.log('Cycle Count Physical Form data deleted:', id);
	                }
	            })
	            .catch(error => {
	                console.error('Error deleting cycle count physical form data:', error);
	            });
	    }
	}
	
	
function loadPhysicalCountTable() {
    	        // Create the button and table container structure immediately
    	        const container = document.getElementById("resolvediscrepancy-table-container");
    	        container.innerHTML =`
    	            <div class="table-header">
    					<div class="button-container" >
    					                <button class="styled-button" onclick="window.location.href='/inventory/resolvediscrepancygrid'" style="flex-grow: 1; margin-left: 60%;">
    					                    <i class="fas fa-arrow-left"></i> Back
    					                </button>
    					                <button id="open-register-btn" class="styled-button" style="flex-grow: 1; margin-left: 20px;">
    					                Physical Count Form
    					                </button>
    					            </div>
    					</div>
    	            <table>
    	                <thead>
    	                    <tr>
    	                    <th>ID</th>
    	                    <th>Product ID</th>
	                        <th>Product Name</th>	                        
	                        <th>Current System Stock</th>
	                        <th>Physical Count</th>
	                        <th>Difference</th>
	                        <th>Physical Count Date</th>
	                        <th>Approval Status</th>
	                        <th>Action</th>
    	                    </tr>
    	                </thead>
    	                <tbody id="physicalcount-table-body">
    	                    <tr><td colspan="9">Loading data...</td></tr>
    	                </tbody>
    	            </table>
    	        `;

    	        // Add event listener to the "Register Employee" button
    	        document.getElementById("open-register-btn").addEventListener("click", () => {
    	            // Redirect to the employeeattendance registration form
    	            window.location.href = '/physicalcountform';
    	        });

    	        // Fetch and populate table data
    	        fetch('/viewPhysicalCountlist')
    	            .then(response => {
    	                if (!response.ok) {
    	                    throw new Error('Network response was not ok');
    	                }
    	                return response.json();
    	            })
    	            .then(data => {
    	                const headers = data.headers; // Extract headers dynamically
    	                const rows = data.data;      // Extract employee data
    	                const tbody = document.getElementById("physicalcount-table-body");

    	                // Check if there are rows to display
    	                if (rows.length === 0) {
    	                    tbody.innerHTML = `<tr><td colspan="9">No data available.</td></tr>`;
    	                    return;
    	                }

    	                // Generate rows from data
    	                tbody.innerHTML = rows.map(row => `
    	                    <tr>
    	                        <td>${row['ID']}</td>
    	                        <td>${row['Product ID']}</td>
    	                        <td>${row['Product Name']}</td>
    	                        <td>${row['Current System Stock']}</td>
    	                        <td>${row['Physical Count']}</td>
    	                        <td>${row['Difference']}</td>
    	                        <td>${row['Physical Count Date']}</td>
    	                        <td>${row['Approval Status']}</td>
    	                       
    	                        <td>
    	                            <div class="action-buttons">
    	                                <a href="#" class="btn btn-delete" data-id="${row['ID']}" onclick="DeletePhysicalCountinfo(this)">Delete</a>
    	                                <a href="/editphysicalcount/${row['ID']}" class="btn btn-update">Update</a>
    	                            </div>
    	                        </td>
    	                    </tr>
    	                `).join('');
    	            })
    	            .catch(error => {
    	                console.error('Error fetching physical count form data:', error);
    	                document.getElementById("physicalcount-table-body").innerHTML = `<tr><td colspan="9">Error loading data.</td></tr>`;
    	            });
    	    }

			function DeletePhysicalCountinfo(element) {
		    const id = element.getAttribute('data-id'); // Retrieve the employee ID
		    if (confirm(`Are you sure you want to delete physical count form details with ID: ${id}?`)) {
		        // Perform the fetch request with the employee ID as a query parameter
		        fetch(`/deletephysicalcountinfo?id=${id}`, { method: 'GET' })
		            .then(response => {
		                if (response.redirected) {
		                    // Redirect to the new location if the server redirects
		                    window.location.href = response.url;
		                } else {
		                    console.log('physical count form details deleted:', id);
		                }
		            })
		            .catch(error => {
		                console.error('Error deleting physical count form details:', error);
		            });
		    }
		}
	
	
	
// 		function loadSalesOrderTable() {
// 			        // Create the button and table container structure immediately
// 			        const container = document.getElementById("expirydatemanagement-table-container");
// 			        container.innerHTML = `
// 			            <div class="table-header">
// 							<div class="button-container" style="margin-left: 1045px;">
// 											                <button class="styled-button" onclick="window.location.href='/inventory/procurementintegrationGrid'" style="flex-grow: 1;">
// 											                    <i class="fas fa-arrow-left"></i> Back
// 											                </button>
// 											                <button id="open-register-btn" class="styled-button" style="flex-grow: 1; margin-left: 20px;">
// 											                Sales Order Form
// 											                </button>
// 											            </div>
// 						 </div>
// 			            <table>
// 			            <thead>
// 			            <tr>
// 			                <th>ID</th>
// 			                <th>Sales Order ID</th>
// 			                <th>Customer UID</th>
// 			                <th>Customer Name</th>
// 			                <th>Email Address</th>
// 			                <th>Phone Number</th>
// 			                <th>Billing Address</th>
// 			                <th>Shipping Address</th>
// 			                <th>Product Name</th>
// 			                <th>Product ID</th>
// 			                <th>Quantity</th>
// 			                <th>Total Amount</th>
// 			                <th>Order Date</th>
// 			                <th>Order Status</th>
// 			                <th>Delivery Address</th>
// 			                <th>Delivery Date</th>
// 			                <th>Delivery Method</th>
// 			                <th>Delivery Status</th>
// 			                <th>Action</th>
// 			            </tr>
// 			        </thead>

// 			                <tbody id="SalesOrder-table-body">
// 			                    <tr><td colspan="9">Loading data...</td></tr>
// 			                </tbody>
// 			            </table>
// 			        `;

// 			        // Add event listener to the "Register Employee" button
// 			        document.getElementById("open-register-btn").addEventListener("click", () => {
// 			            // Redirect to the employee shift info form
// 			            window.location.href = '/salesform';
// 			        });

// 			        // Fetch and populate table data
// 			        fetch('/viewAllSalesOrderlist')
// 			            .then(response => {
// 			                if (!response.ok) {
// 			                    throw new Error('Network response was not ok');
// 			                }
// 			                return response.json();
// 			            })
// 			            .then(data => {
// 			                const headers = data.headers; // Extract headers dynamically
// 			                const rows = data.data;      // Extract employee data
// 			                const tbody = document.getElementById("SalesOrder-table-body");

// 			                // Check if there are rows to display
// 			                if (rows.length === 0) {
// 			                    tbody.innerHTML = `<tr><td colspan="9">No data available.</td></tr>`;
// 			                    return;
// 			                }

// 			                // Generate rows from data
// 			                tbody.innerHTML = rows.map(row => `
// 			                    <tr>
// 			                <td>${row['ID']}</td>
// 			                <td>${row['Sales Order ID']}</td>
// 			                <td>${row['Customer UID']}</td>
// 			                <td>${row['Customer Name']}</td>
// 			                <td>${row['Email Address']}</td>
// 			                <td>${row['Phone Number']}</td>
// 			                <td>${row['Billing Address']}</td>
// 			                <td>${row['Shipping Address']}</td>
// 			                <td>${row['Product Name']}</td>
// 			                <td>${row['Product ID']}</td>
// 			                <td>${row['Quantity']}</td>
// 			                <td>${row['Total Amount']}</td>
// 			                <td>${row['Order Date']}</td>
// 			                <td>${row['Order Status']}</td>
// 			                <td>${row['Delivery Address']}</td>
// 			                <td>${row['Delivery Date']}</td>
// 			                <td>${row['Delivery Method']}</td>
// 			                <td>${row['Delivery Status']}</td>
// 			                <td>
// 			                            <div class="action-buttons">
// 			                                <a href="#" class="btn btn-delete" data-id="${row['ID']}" onclick="DeletefromSalesOrderinfo(this)">Delete</a>
// 			                                <a href="/updatesales/${row['ID']}" class="btn btn-update">Update</a>
// 			                            </div>
// 			                        </td>
// 			                    </tr>
// 			                `).join('');
// 			            })
// 			            .catch(error => {
// 			                console.error('Error fetching Sales Order data:', error);
// 			                document.getElementById("SalesOrder-table-body").innerHTML = `<tr><td colspan="9">Error loading data.</td></tr>`;
// 			            });
// 			    }

// 					function DeletefromSalesOrderinfo(element) {
// 				    const id = element.getAttribute('data-id'); // Retrieve the employee ID
// 				    if (confirm(`Are you sure you want to delete Sales Order Info with ID: ${id}?`)) {
// 				        // Perform the fetch request with the employee ID as a query parameter
// 				        fetch(`/deletesalesinfo?id=${id}`, { method: 'GET' })
// 				            .then(response => {
// 				                if (response.redirected) {
// 				                    // Redirect to the new location if the server redirects
// 				                    window.location.href = response.url;
// 				                } else {
// 				                    console.log('Sales Order info deleted:', id);
// 				                }
// 				            })
// 				            .catch(error => {
// 				                console.error('Error deleting Sales Order info :', error);
// 				            });
// 				    }
// 				}
	
					
// function loadBackOrderTable() {
// 				        // Create the button and table container structure immediately
// 				        const container = document.getElementById("expirydatemanagement-table-container");
// 				        container.innerHTML = `
// 				            <div class="table-header">
// 								<div class="button-container" style="margin-left: 1045px;">
// 												                <button class="styled-button" onclick="window.location.href='/inventory/procurementintegrationGrid'" style="flex-grow: 1;">
// 												                    <i class="fas fa-arrow-left"></i> Back
// 												                </button>
// 												                <button id="open-register-btn" class="styled-button" style="flex-grow: 1; margin-left: 20px;">
// 												                Back Order Form
// 												                </button>
// 												            </div>
// 							 </div>
// 				            <table>
// 				                <thead>
// 				                    <tr>
// 				                    <th>ID</th>
// 	    	                        <th>Employee ID</th>
// 	    	                        <th>First Name</th>
// 	    	                        <th>Last Name</th>
// 	    	                        <th>Department</th>
// 	    	                        <th>Shift Date</th>
// 	    	                        <th>Shift Duration</th>
// 	    	                        <th>Shift Status</th>
// 	    	                        <th>Action</th>
// 				                    </tr>
// 				                </thead>
// 				                <tbody id="BackOrder-table-body">
// 				                    <tr><td colspan="9">Loading data...</td></tr>
// 				                </tbody>
// 				            </table>
// 				        `;

// 				        // Add event listener to the "Register Employee" button
// 				        document.getElementById("open-register-btn").addEventListener("click", () => {
// 				            // Redirect to the employee shift info form
// 				            window.location.href = '/shift';
// 				        });

// 				        // Fetch and populate table data
// 				        fetch('/viewshiftlist')
// 				            .then(response => {
// 				                if (!response.ok) {
// 				                    throw new Error('Network response was not ok');
// 				                }
// 				                return response.json();
// 				            })
// 				            .then(data => {
// 				                const headers = data.headers; // Extract headers dynamically
// 				                const rows = data.data;      // Extract employee data
// 				                const tbody = document.getElementById("BackOrder-table-body");

// 				                // Check if there are rows to display
// 				                if (rows.length === 0) {
// 				                    tbody.innerHTML = `<tr><td colspan="9">No data available.</td></tr>`;
// 				                    return;
// 				                }

// 				                // Generate rows from data
// 				                tbody.innerHTML = rows.map(row => `
// 				                    <tr>
// 						                <td>${row['ID']}</td>
// 				                        <td>${row['Employee ID']}</td>
// 				                        <td>${row['First Name']}</td>
// 				                        <td>${row['Last Name']}</td>
// 				                        <td>${row['Department']}</td>
// 				                        <td>${row['Shift Date']}</td>
// 				                        <td>${row['Shift Duration']}</td>
// 				                        <td>${row['Shift Status']}</td>
// 				                        <td>
// 				                            <div class="action-buttons">
// 				                                <a href="#" class="btn btn-delete" data-id="${row['ID']}" onclick="DeletefromBackOrderinfo(this)">Delete</a>
// 				                                <a href="/updateShift/${row['ID']}" class="btn btn-update">Update</a>
// 				                            </div>
// 				                        </td>
// 				                    </tr>
// 				                `).join('');
// 				            })
// 				            .catch(error => {
// 				                console.error('Error fetching Back Order data:', error);
// 				                document.getElementById("BackOrder-table-body").innerHTML = `<tr><td colspan="9">Error loading data.</td></tr>`;
// 				            });
// 				    }

// 						function DeletefromBackOrderinfo(element) {
// 					    const id = element.getAttribute('data-id'); // Retrieve the employee ID
// 					    if (confirm(`Are you sure you want to delete Back Order Info with ID: ${id}?`)) {
// 					        // Perform the fetch request with the employee ID as a query parameter
// 					        fetch(`/deleteShift?id=${id}`, { method: 'GET' })
// 					            .then(response => {
// 					                if (response.redirected) {
// 					                    // Redirect to the new location if the server redirects
// 					                    window.location.href = response.url;
// 					                } else {
// 					                    console.log('Back Order info deleted:', id);
// 					                }
// 					            })
// 					            .catch(error => {
// 					                console.error('Error deleting Back Order info :', error);
// 					            });
// 					    }
// 					}
	
	
	
	
	
	
	
	
    // Call the function to load the employee table when the page loads
  //  document.addEventListener("DOMContentLoaded", loadEmployeeTable);
</script>
</body>
</html>
